/* Copyright 2013 EasyDNNsolutions.com
 ChameleonSlider has been developed by EasyDNNsolutions.com. It can be
 used only as an integral part of EasyDNNsolutions.com modules.
 All unauthorized copying or use of the code or parts of the code is
 prohibited.
*/
(function(k){k.fn.chameleonSlider_1_5_1=function(y){var c=k.extend(!0,{},{content_source:"",container_dimensions:{width:750,height:400,w_as_ratio:!1,h_as_ratio:!1},autoplay:{enable:!0,interval:4E3,pause_on_hover:!0,indicator:{display:!0,position:{vertical:"top",horizontal:"left",h_offset:0,v_offset:0,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1},dimensions:{height:2,width:750,h_as_ratio:!1,w_as_ratio:!1},orientation:"horizontal",flip_direction:!1}},arrows:{display:!0,auto_hide:!0,
hide_speed:250,prev:{position:{vertical:"top",horizontal:"left",h_offset:0,v_offset:183,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1}},next:{position:{vertical:"top",horizontal:"right",h_offset:0,v_offset:183,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1}}},autoplay_toggle:{display:!0,auto_hide:!0,hide_speed:250,position:{vertical:"top",horizontal:"left",h_offset:347,v_offset:130,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1}},scrollable_boxes:{item_info:{display:!0,
container:{dimensions:{height:100,width:750,h_as_ratio:!1,w_as_ratio:!1},resize_to_content:!0,show_on_hover:!1,position:{vertical:"top",horizontal:"left",h_offset:0,v_offset:2,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1}}},gallery_info:{display:!1,container:{dimensions:{height:100,width:750,h_as_ratio:!1,w_as_ratio:!1},resize_to_content:!0,show_on_hover:!1,position:{vertical:"top",horizontal:"left",h_offset:0,v_offset:2,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1}}}},
thumbs:{display:!0,auto_hide:!1,hide_speed:250,width:100,height:46,captions:!0,display_item_types:!1,pagination:{direction:"horizontal",duration:250,easing:"swing"},tooltips:{enabled:!1,title:!0,description:!1,position:{my:"bottom center",at:"top center"},classes:""},container:{transparent:!0,dimensions:{height:20,width:679,h_as_ratio:!1,w_as_ratio:!1},position:{vertical:"bottom",horizontal:"left",h_offset:35,v_offset:0,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1}}},categories:{display:!1,
auto_hide:!1,hide_speed:250,width:100,height:46,pagination:{direction:"horizontal",duration:250,easing:"swing"},container:{dimensions:{height:20,width:679,h_as_ratio:!1,w_as_ratio:!1},position:{vertical:"bottom",horizontal:"left",h_offset:35,v_offset:0,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1}}},pagination:{display:!0,pages_at_once:7,direction:"horizontal",position:{vertical:"bottom",horizontal:"right",h_offset:35,v_offset:58,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1}},
title_boxes:{current_item:{display:!1,height:35,position:{vertical:"bottom",horizontal:"left",h_offset:0,v_offset:200,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1}},current_gallery:{display:!1,height:35,position:{vertical:"top",horizontal:"left",h_offset:0,v_offset:0,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1}}},buttons:{email:{display:!1,position:{vertical:"top",horizontal:"right",h_offset:35,v_offset:58,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1},
email_subject:"Look at this link"},download:{display:!1,position:{vertical:"top",horizontal:"left",h_offset:35,v_offset:58,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1}},fullscreen:{display:!1,position:{vertical:"top",horizontal:"left",h_offset:35,v_offset:58,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1}},exit_fullscreen:{display:!1,position:{vertical:"bottom",horizontal:"right",h_offset:35,v_offset:58,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1}}},
social_buttons:{display:!1,direction:"horizontal",load_after_effect:!0,position:{vertical:"bottom",horizontal:"right",h_offset:35,v_offset:58,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1},buttons:{facebook:{display:!0,html:'<iframe src="//www.facebook.com/plugins/like.php?href={location_href_encoded}&amp;layout=button_count&amp;show_faces=true&amp;action=like&amp;font&amp;colorscheme=light&amp;height=20" scrolling="no" frameborder="0" style="border:none; overflow:hidden; height:20px; width: 100px;" allowTransparency="true"></iframe>'},
google:{display:!0,html:'<g:plusone size="medium" href="{location_href}" annotation="bubble"></g:plusone><script type="text/javascript">gapi.plusone.go();\x3c/script>'},twitter:{display:!0,html:'<a href="http://twitter.com/share" class="twitter-share-button" data-url="{location_href}" data-count="horizontal">Tweet</a><script type="text/javascript" src="//platform.twitter.com/widgets.js">\x3c/script>'}},hideable:!1,container:{width:100,height:100}},main_panel:{display:!0,fill_panel:!1,stretch_small_image:!1,
top_left_align:!1,drag_navigation:!1,dimensions:{width:750,height:400,h_as_ratio:!1,w_as_ratio:!1},position:{vertical:"top",horizontal:"left",h_offset:0,v_offset:0,h_as_ratio:!1,v_as_ratio:!1,v_center_point:!1,h_center_point:!1},transition:{duration:800,effects:[]}},lightbox_title:!1,lightbox_description:!1,key_browse:!0,redirect_on_click:!1,redirect_on_click_target:"_self",lightbox_on_click:!1,module_id:0,portal_id:0,article_id:0,filter_values:"",filter_types:"",locale:"",inhouse_player:"flowplayer",
flowplayer_src:"",fullscreen_provider:"pp",pretty_photo_options:{},smb_options:{},cycle_current_category:!0,open_at:null},y);return this.each(function(){var r,m,n=k(this),y,X,Q=0,K=k('<div class="loading_slider_overlay" />'),R=k('<div class="indicator" />'),C=k("<p />"),w,g={},z,p,S=0,f={},u,q,x=k(),G,T,v,A,O,s,H,t,D,B,I="",Y=0,Z=0,$=0,L=0,M=!1,J=!1,aa=!1,U=!1,P=!1,N=!1,E,F,d={container_dimensions:{},thumbs:{page:{vertical_space:0,horizontal_space:0,width:0,height:0,count:0},container:{},width:0,
height:0,per_page:0,per_row:0,row_count:0,window_width:0,window_height:0},categories:{page:{vertical_space:0,horizontal_space:0,width:0,height:0,count:0},container:{},width:0,height:0,per_page:0,per_row:0,row_count:0,window_width:0,window_height:0,render_categories:!0},autoplay:{indicator:{}},title_boxes:{current_item:{},current_gallery:{}},scrollable_boxes:{item_info:{},gallery_info:{}},pagination:{pages_at_once:0,page:{width:0,height:0}},main_panel:{dimensions:{},initialized:!1,disable_clicking:!1,
disable_clicking_interval:""},preloaded_images:{},preloading_item:!1,buttons:{email:{},download:{},fullscreen:{},exit_fullscreen:{}},html5:{video:!1},youtube_iframe_api:{called:!1,loaded:!1},ios:!1,mouse_entered:!1},e={init:function(){var a=document.createElement("video");c.container_dimensions.w_as_ratio||c.container_dimensions.h_as_ratio?(y=n.parent(),d.container_dimensions={width:c.container_dimensions.w_as_ratio?Math.round(y.width()*c.container_dimensions.width):c.container_dimensions.width,height:c.container_dimensions.h_as_ratio?
Math.round(y.height()*c.container_dimensions.height):c.container_dimensions.height},k(window).bind("resize.chameleonSlider",function(){clearTimeout(X);X=setTimeout(function(){var a={width:y.width(),height:c.container_dimensions.h_as_ratio?y.height():c.container_dimensions.height};n.trigger("resize_slider",[a])},200)})):d.container_dimensions={width:c.container_dimensions.width,height:c.container_dimensions.height};n.width(d.container_dimensions.width).height(d.container_dimensions.height).append(K).bind("destroy",
function(){clearTimeout(I)});K.width(d.container_dimensions.width).height(d.container_dimensions.height).append(R).show(0);try{d.html5.video=!!a.canPlayType}catch(b){}if(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i))d.ios=!0;e.get_content_source()},get_content_source:function(){3<Q?C.is(":visible")?C.html("Unable to display the items (requesting the items failed)"):R.fadeOut(250,function(){C=k("<p>Unable to display the items (requesting the items failed)</p>");
C.appendTo(K).css({display:"block",top:Math.floor((d.container_dimensions.height-C.outerHeight(!0))/2)})}):(Q+=1,k.ajax({dataType:"json",type:"get",url:c.content_source,timeout:15E3,data:"mid="+c.module_id+"&portal_id="+c.portal_id+"&locale="+c.locale+"&article_id="+c.article_id+"&html5_player="+(d.html5.video&&d.ios?"1":"0")+(""===c.filter_values?"":"&filter_values="+c.filter_values+"&filter_types="+c.filter_types),success:e.load,complete:e.ajax_callback,cache:!1}))},ajax_callback:function(a,b){"success"!==
b&&e.get_content_source()},load:function(a){var b=window.location.hash.substring(1),l=b.indexOf("/"),h=void 0,f=-1==l?"":b.substring(0,l);0==a.content.length?R.fadeOut(250,function(){C=k("<p>"+(a.user_friendly_msg?a.user_friendly_msg:"There are no items to display.")+"</p>");C.appendTo(K).css({display:"block",top:Math.floor((d.container_dimensions.height-C.outerHeight(!0))/2)})}):(w=a.content,null!=c.open_at?(r=c.open_at.categories,m=[],m=e.category_indexes_from_ids(k.extend([],r),w),0==m.length&&
(m=[0],r=[w[0].id]),g=e.get_category(m),g.item_count=g.items.length,z=0,p=e.item_index_from_id(c.open_at.item),z=g.items[p].id):f=="slider_"+c.module_id||f=="gallery_"+c.module_id?(b=b.substring(l+1),l=b.indexOf("/"),-1!==l&&(h=b.substring(l+1),l=h.indexOf("/"),-1!==l&&(h=h.substring(0,l)),h||(h=void 0),b=b.substring(0,b.indexOf("/"))),r=b.split("-"),m=[],m=e.category_indexes_from_ids(k.extend([],r),w),0==m.length&&(m=[0],r=[w[0].id]),g=e.get_category(m),g.item_count=g.items.length,z=0,p=e.item_index_from_id(h),
z=g.items[p].id,"smb"==c.fullscreen_provider&&(void 0!=h&&f=="gallery_"+c.module_id&&0<g.item_count)&&function(){var a=[];c.smb_options.openAt=0;k.each(g.items,function(b,d){d.id===z&&(c.smb_options.openAt=b);a.push(d.smb_object)});k("<div />").data("socialMediaBox",a).socialMediaBox(c.smb_options)}()):(r=[w[0].id],m=[0],g=w[0],g.item_count=g.items.length,z=void 0,p=e.item_index_from_id(void 0)),"YT"in window&&"Player"in window.YT&&(d.youtube_iframe_api.called=!0,d.youtube_iframe_api.loaded=!0),c.buttons.exit_fullscreen.display&&
e.exit_fullscreen.init(),c.autoplay.enable&&e.autoplay.init(),c.pagination.display&&e.pagination.init(),c.social_buttons.display&&e.social_buttons.init(),c.buttons.email.display&&e.email_button.init(),c.buttons.download.display&&e.download_button.init(),c.buttons.fullscreen.display&&e.fullscreen_button.init(),c.autoplay_toggle.display&&e.autoplay_toggle.init(),c.arrows.display&&e.arrows.init(),c.categories.display&&e.categories.init(),c.thumbs.display&&e.thumbnails.init(),c.title_boxes.current_item.display&&
e.item_title.init(),c.title_boxes.current_gallery.display&&e.gallery_title.init(),c.scrollable_boxes.item_info.display&&e.item_info.init(),c.scrollable_boxes.gallery_info.display&&e.gallery_info.init(),c.main_panel.display?e.main_panel.init():e.triggers())},show_item:function(a,b,l){a=parseInt(a,10);if(a!==p||"undefined"!=typeof b)N=!1,0>a?a=g.item_count-1:a>=g.item_count&&(a=0),e.autoplay.reset(),S=p,p=a,z=g.items[a].id,e.pagination.select(a),e.social_buttons.display(a),e.thumbnails.select(a),e.item_title.select(a),
e.item_info.display(a),e.download_button.display(a),e.email_button.display(a),c.main_panel.display?d.preloading_item||("undefined"==typeof l?e.main_panel.display(a):e.main_panel.display(a,l)):n.trigger("slider_transition_finnished")},next:function(){var a,b=w.length;c.cycle_current_category||p!=g.item_count-1?e.show_item(p+1):(a=m.pop()+1,0!=m.length&&(b=e.get_category(m).children.length),a<b?m.push(a):m.push(0),r=e.category_ids_from_indexes(m),g=e.get_category(m),g.item_count=g.items.length,z=g.items[0].id,
p=0,d.categories.render_categories=!1,e.change_category())},prev:function(){var a,b=w.length;c.cycle_current_category||0!=p?e.show_item(p-1):(a=m.pop()-1,0!=m.length&&(b=e.get_category(m).children.length),0>a?m.push(b-1):m.push(a),r=e.category_ids_from_indexes(m),g=e.get_category(m),g.item_count=g.items.length,z=g.items[g.items.length-1].id,p=g.items.length-1,d.categories.render_categories=!1,e.change_category())},pagination:{init:function(){var a;v=k('<div class="pagination" />');A=k('<ul class="pages_container" />');
v.append(A);v.css("visibility","hidden");n.prepend(v);e.position_element(v,c.pagination.position);a=k("<li><span></span></li>");A.append(a);d.pagination.page.width=a.outerWidth(!0);d.pagination.page.height=a.outerHeight(!0);v.css("visibility","");e.pagination.display_category();e.pagination.select(p);A.delegate("li","click",function(){e.show_item(k(this).index());return!1})},display_category:function(){if(c.pagination.display){var a=0,b="";v.css("display","none");A.html("");d.pagination.pages_at_once=
g.item_count<c.pagination.pages_at_once?g.item_count:c.pagination.pages_at_once;"horizontal"===c.pagination.direction?(v.addClass("horizontal"),v.width(d.pagination.pages_at_once*d.pagination.page.width),v.height(d.pagination.page.height),A.width(g.item_count*d.pagination.page.width),A.height(d.pagination.page.height)):(v.addClass("vertical"),v.width(d.pagination.page.width),v.height(d.pagination.pages_at_once*d.pagination.page.height),A.width(d.pagination.page.width),A.height(g.item_count*d.pagination.page.height));
for(;a<g.item_count;a++)b+="<li><span></span></li>";O=k(b);A.append(O);v.css("display","")}},select:function(a){if(c.pagination.display){var b=Math.floor(d.pagination.pages_at_once/2),e=a-b,h={};0>e?e=0:a>=g.item_count-b&&(e=g.item_count-d.pagination.pages_at_once);h="horizontal"==c.pagination.direction?{left:-(e*d.pagination.page.width)}:{top:-(e*d.pagination.page.height)};A.stop().animate(h,250);O.removeClass("current");O.eq(a).addClass("current")}}},social_buttons:{init:function(){s=k('<div class="social_buttons '+
c.social_buttons.direction+'" />');c.social_buttons.hideable?(H=k('<div class="social_buttons_toggle '+c.social_buttons.direction+'" />'),n.prepend(H),e.position_element(H,c.social_buttons.position),s.fadeTo(200,0,function(){s.hide()}).data("visible",!1),n.prepend(s),e.position_element(s,k.extend({},c.social_buttons.position,{h_offset:c.social_buttons.position.h_offset+H.outerWidth(!0)+5})),H.click(function(){s.data("visible")?(s.data("visible",!1).stop().fadeTo(200,0,function(){s.empty().hide()}),
H.removeClass("active")):(s.data("visible",!0).stop().fadeTo(200,1),e.social_buttons.display(p),H.addClass("active"))})):(n.prepend(s),e.position_element(s,c.social_buttons.position));e.social_buttons.display(p)},display:function(a){if(c.social_buttons.display&&(!c.social_buttons.hideable||s.data("visible"))){var b="",d="";s.html("");"string"==typeof g.items[a].social_button_url?d=g.items[a].social_button_url:(d=-1==location.href.indexOf("#")?location.href:location.href.substring(0,location.href.indexOf("#")),
d=e.set_url_param(e.set_url_param(d,"edgpid",g.items[a].id),"edgmid",c.module_id)+"#slider_"+c.module_id+"/"+r.join("-")+"/"+g.items[a].id+"/");for(button in c.social_buttons.buttons)c.social_buttons.buttons[button].display&&(b+='<div class="social_button">',b+=c.social_buttons.buttons[button].html.replace(/{location_href}/g,d).replace(/{location_href_encoded}/g,encodeURIComponent(d)),b+="</div>");P&&c.social_buttons.load_after_effect?(n.unbind("slider_transition_finnished.social_buttons"),n.bind("slider_transition_finnished.social_buttons",
function(){s.html("").append(b)})):s.append(b)}}},_button:{init:function(a){d.buttons[a.type]=k('<a class="standalone_button'+(a.custom_class?" "+a.custom_class:"")+'" href="#">'+a.text+"</a>");n.prepend(d.buttons[a.type]);e.position_element(d.buttons[a.type],c.buttons[a.type].position)},display:function(a){a.target="string"==typeof a.target?a.target:"_self";d.buttons[a.type].attr({href:a.href,target:a.target})}},email_button:{init:function(){e._button.init({type:"email",custom_class:"email",text:"Email this"});
e.email_button.display(p)},display:function(a){a=location.href.indexOf("#");c.buttons.email.display&&(a=-1==a?location.href:location.href.substring(0,a),a+="#slider_"+c.module_id+"/"+r.join("-")+"/"+g.items[p].id,e._button.display({type:"email",href:"mailto:?subject="+escape(c.buttons.email.email_subject)+"&body="+encodeURIComponent(a)}))}},download_button:{init:function(){e._button.init({type:"download",custom_class:"download",text:"Download"});e.download_button.display(p)},display:function(a){a=
g.items[a].download_url;c.buttons.download.display&&(a=a?a:"#",e._button.display({type:"download",href:a,target:"_blank"}),"#"==a?d.buttons.download.stop().fadeTo(200,0):d.buttons.download.stop().fadeTo(200,1))}},fullscreen_button:{init:function(){e._button.init({type:"fullscreen",custom_class:"fullscreen",text:"Fullscreen"});d.buttons.fullscreen.click(function(){k(this).chameleonSliderFullscreen(c.fullscreen_options);return!1})}},exit_fullscreen:{init:function(){e._button.init({type:"exit_fullscreen",
custom_class:"exit_fullscreen",text:"Exit fullscreen"})}},main_panel:{init:function(){var a,b="mousedown",l="mousemove";mouseup="mouseup";u=k('<div class="main_panel" />');e.main_panel.size();q=k('<div class="items_wrapper" />');u.append(q);n.prepend(u);if(c.redirect_on_click||c.lightbox_on_click)x=k('<a href="#" class="media_link" />'),c.redirect_on_click&&x.attr("target",c.redirect_on_click_target),u.append(x);!c.redirect_on_click&&c.lightbox_on_click&&(G=k('<div class="lightbox_links_container" style="display: none;"></div>'),
q.append(G));n.bind("slider_transition_finnished.main_panel",function(){P=!1});e.main_panel.display_category(!0);d.preloading_item||(e.main_panel.display(p,""),e.triggers());if(c.main_panel.drag_navigation){if(a="ontouchstart"in window)b="touchstart",l="touchmove",mouseup="touchend";u.delegate("a","click",function(a){d.main_panel.disable_clicking&&a.preventDefault()}).bind(b+".chameleon_"+c.module_id,function(b){a&&(b.originalEvent.touches&&b.originalEvent.touches.length?b=b.originalEvent.touches[0]:
b.originalEvent.changedTouches&&b.originalEvent.changedTouches.length&&(b=b.originalEvent.changedTouches[0]));u.data("dragging",{start_position:{left:b.pageX,top:b.pageY}});b.preventDefault()});k(document).bind(l+".chameleon_"+c.module_id,function(b){if("object"==typeof u.data("dragging")){d.main_panel.disable_clicking=!0;a&&(b.originalEvent.touches&&b.originalEvent.touches.length?b=b.originalEvent.touches[0]:b.originalEvent.changedTouches&&b.originalEvent.changedTouches.length&&(b=b.originalEvent.changedTouches[0]));
b=u.data("dragging").start_position.left-b.pageX;if(50>Math.abs(b))return!1;u.data("dragging",!1);0>b?e.prev():e.next()}}).bind(mouseup+".chameleon_"+c.module_id,function(a){u.data("dragging",!1);d.main_panel.disable_clicking_interval=setTimeout(function(){d.main_panel.disable_clicking=!1},10)})}d.main_panel.initialized=!0},size:function(){c.main_panel.display&&(d.main_panel.dimensions=e.get_dimensions(c.main_panel.dimensions),e.position_element(u,c.main_panel.position),u.width(d.main_panel.dimensions.width).height(d.main_panel.dimensions.height))},
display_category:function(a){var b="",l=0,h,f,m;current_item=g.items[p];smb_items=[];if(c.main_panel.display){if("image"==current_item.type||("video"==current_item.type||"audio"==current_item.type)&&c.lightbox_on_click)d.preloading_item=!0,a?k("<img />").load(function(){d.preloading_item=!1;e.main_panel.display(p,"");e.triggers()}).error(function(){d.preloading_item=!1;e.triggers()}).attr("src",current_item.src):(u.append('<div class="preloading_item" />'),k("<img />").load(function(){d.preloading_item=
!1;e.main_panel.display(p,"");u.find(".preloading_item").fadeOut(1E3,function(){k(this).remove()})}).error(function(){d.preloading_item=!1;e.main_panel.display(p,"");u.find(".preloading_item").fadeOut(1E3,function(){k(this).remove()})}).attr("src",current_item.src));for(;l<g.item_count;l++)a=g.items[l],"image"!=a.type&&("video"!=a.type&&"audio"!=a.type||!c.lightbox_on_click)||d.preloaded_images[a.src]||(d.preloaded_images[a.src]={loading:!0,loaded:!1},k("<img />").load({src:a.src},function(a){d.preloaded_images[a.data.src]=
{loading:!1,loaded:!0,width:this.width,height:this.height}}).attr("src",a.src)),!c.redirect_on_click&&c.lightbox_on_click&&("image"==a.type||"video"==a.type||"audio"==a.type?(h=a.lightbox_url,f=a.download_url?a.download_url:"",m=a.src):m=f=h="","pp"==c.fullscreen_provider?h&&(b+='<a href="'+h+'" rel="prettyPhoto_M'+c.module_id+'" edgmid="'+c.module_id+'" edgpid="'+a.id+'" downhref="'+f+(c.lightbox_description&&a.info?'" pptitle="'+a.info.replace('"',"&quot;"):"")+'"><img src="'+m+'" alt="'+(c.lightbox_title&&
a.title?a.title:"")+'" /></a>'):"smb"==c.fullscreen_provider&&k.isPlainObject(a.smb_object)&&!k.isEmptyObject(a.smb_object)&&smb_items.push(a.smb_object));!c.redirect_on_click&&c.lightbox_on_click&&("pp"==c.fullscreen_provider?(G.html(b),T=G.find("> a"),T.prettyPhoto(c.pretty_photo_options)):"smb"==c.fullscreen_provider&&G.data("socialMediaBox",smb_items))}},display:function(a){var b="",l="",h=g.items[a];if(c.main_panel.display){P=!0;x.unbind("click");if("image"==h.type)2==arguments.length?l=b=arguments[1]:
1==c.main_panel.transition.effects.length?l=b=c.main_panel.transition.effects[0]:1<c.main_panel.transition.effects.length&&(b=Math.floor(Math.random()*c.main_panel.transition.effects.length),l=b=c.main_panel.transition.effects[b]),x.css("display","block"),c.redirect_on_click&&x.attr("href","string"==typeof h.on_click_url&&h.on_click_url?h.on_click_url:"#");else if("video"==h.type||"audio"==h.type)b="",c.redirect_on_click||"undefined"!=typeof h.html&&""!=h.html?x.css("display","none"):x.css("display",
"block");!c.redirect_on_click&&c.lightbox_on_click&&x.attr("href","#").click(function(){if(d.main_panel.disable_clicking)return!1;"pp"==c.fullscreen_provider?T.filter('a[edgpid="'+h.id+'"]').trigger("click"):"smb"==c.fullscreen_provider&&(c.smb_options.openAt=0,k.each(G.data("socialMediaBox"),function(a,b){if(b.id===h.id)return c.smb_options.openAt=a,!1}),G.socialMediaBox(c.smb_options));return!1});"object"==typeof l?b=l.type:""==b&&(b="show");e.main_panel._transitions[b](a,l);c.main_panel.fill_panel&&
("image"==h.type||("video"==h.type||"audio"==h.type)&&c.lightbox_on_click)&&e.main_panel._fit_image(q.find("> .item_container").filter(":last").find("> img"))}},_fit_image:function(a){var b=a.attr("src"),e=d.preloaded_images[b],h=function(a,b){var e=d.main_panel.dimensions.width,l=d.main_panel.dimensions.height,h;if(b.width!=e||b.height!=l)a.css({position:"relative"}),b.width>e||b.height>l||c.main_panel.stretch_small_image?(a.css({width:"100%",height:"auto"}),h=e/b.width,h=Math.floor(b.height*h),
h<l?(h=l/b.height,l=Math.floor(b.width*h),a.css({height:"100%",width:"auto"}),c.main_panel.top_left_align||a.css({left:-Math.floor((l-e)/2)})):h>l&&!c.main_panel.top_left_align&&a.css({top:-Math.floor((h-l)/2)})):c.main_panel.top_left_align||(b.width<e&&a.css({left:Math.floor((e-b.width)/2)}),b.height<l&&a.css({top:Math.floor((l-b.height)/2)}))};e&&e.loaded?h(a,e):k("<img />").load({src:b,$img:a},function(a){d.preloaded_images[a.data.src]={loading:!1,loaded:!0,width:this.width,height:this.height};
h(a.data.$img,d.preloaded_images[a.data.src])}).attr("src",b)},_transitions:{show:function(a){var b='<div class="item_container new_item">',l=g.items[a];a=q.find("> .item_container").eq(0);var h="undefined"==typeof l.html||""==l.html?"":l.html,f="",V,W,r=!1;"video"!=l.type&&"audio"!=l.type||!h?b+='<img alt="" src="'+l.src+'" />':(l="undefined"==typeof l.video_src||""==l.video_src?"":l.video_src,""==l?c.autoplay.enable&&(f=e._video.get_provider(h),V=e._video.get_video_id(f,h)):(f=c.inhouse_player,
V=l),d.html5.video&&d.ios||""===f?b+=h:(r=!0,W="chameleon_video_container_"+c.module_id+"_"+m.join("-")+"_"+p+"_"+Math.round(1E5*Math.random()),b+='<div id="'+W+'"></div>'));b=k(b+"</div>");q.find("> .item_container.new_item").removeClass("new_item");b.css({width:d.main_panel.dimensions.width,height:d.main_panel.dimensions.height}).appendTo(q);r&&e._video.player_setup({container:W,provider:f,id:V,dimensions:d.main_panel.dimensions});a.hasClass("new_item")||a.remove();r||n.trigger("slider_transition_finnished")},
fade:function(a){a=k('<div class="item_container"><img alt="" src="'+g.items[a].src+'" /></div>');q.find("> .item_container.new_item").removeClass("new_item");a.css({width:d.main_panel.dimensions.width,height:d.main_panel.dimensions.height,display:"none"}).appendTo(q).fadeIn(c.main_panel.transition.duration,function(){var a=q.find("> .item_container").eq(0);a.hasClass("new_item")||a.remove();n.trigger("slider_transition_finnished")})},slide:function(a,b){var e=k('<div class="item_container new_item"><img alt="" src="'+
g.items[a].src+'" /></div>'),h=q.find("> .item_container").filter(":last"),f="left",m=function(){var a=q.find("> .item_container").eq(0);a.hasClass("new_item")||a.remove();n.trigger("slider_transition_finnished")};b.force_horizontal?f=S<a?"left":"right":b.force_vertical?f=S<a?"up":"down":1==b.directions.length?f=b.directions[0]:1<b.directions.length&&(f=b.directions[Math.floor(Math.random()*b.directions.length)]);q.find("> .item_container.new_item").removeClass("new_item");e.css({width:d.main_panel.dimensions.width,
height:d.main_panel.dimensions.height});switch(f){case "down":e.css("top",-d.main_panel.dimensions.height).appendTo(q).animate({top:0},c.main_panel.transition.duration,"swing",m);h.animate({top:d.main_panel.dimensions.height},c.main_panel.transition.duration,"swing");break;case "up":e.css("top",d.main_panel.dimensions.height).appendTo(q).animate({top:0},c.main_panel.transition.duration,"swing",m);h.animate({top:-d.main_panel.dimensions.height},c.main_panel.transition.duration,"swing");break;case "right":e.css("left",
-d.main_panel.dimensions.width).appendTo(q).animate({left:0},c.main_panel.transition.duration,"swing",m);h.animate({left:d.main_panel.dimensions.width},c.main_panel.transition.duration,"swing");break;default:e.css("left",d.main_panel.dimensions.width).appendTo(q).animate({left:0},c.main_panel.transition.duration,"swing",m),h.animate({left:-d.main_panel.dimensions.width},c.main_panel.transition.duration,"swing")}},stripes:function(a,b){var e=0,h=0,f=0,m=0,p=0,r=0,u=0,v=0,s=0,t=0,w=g.items[a].src,y=
Math.floor(c.main_panel.transition.duration/b.num_of_stripes),z=k('<div class="item_container new_item"></div>'),A=function(){var a=q.find("> .item_container").eq(0);a.hasClass("new_item")||a.remove();n.trigger("slider_transition_finnished")},B=function(a,d){var g=e,q=h,x=function(){a.animate("horizontal"==b.orientation?{left:0,opacity:1}:{top:0,opacity:1},{duration:c.main_panel.transition.duration,easing:"swing",complete:function(){0==b.start_at||2==b.start_at?d+1==b.num_of_stripes&&A():1==b.start_at?
0==d&&A():d==Math.floor(b.num_of_stripes/2)&&A()}})};"horizontal"==b.orientation?(p=d*h,r=0===b.direction?-e:1===b.direction?e:0==d%2?-e:e,u=s-p,v=t):(r=d*e,p=0===b.direction?-h:1===b.direction?h:0==d%2?-h:h,u=s,v=t-r);d+1==b.num_of_stripes&&(g=f,q=m);a=k('<div class="fancy_effect_element" />');a.css({width:g,height:q,top:p,left:r,opacity:0,background:"url('"+w+"') no-repeat "+v+"px "+u+"px "+n.css("background-color")}).appendTo(z);if(0===b.start_at)setTimeout(x,d*y+1);else if(1==b.start_at)setTimeout(x,
(b.num_of_stripes-1-d)*y+1);else if(2==b.start_at||3==b.start_at)g=0,0==b.num_of_stripes%2?(q=b.num_of_stripes/2,d<q?g=3==b.start_at?d:Math.abs(d-q+1):(g=d-q,3==b.start_at&&(g=q-1-g))):(q=Math.floor(b.num_of_stripes/2),g=d<q?q-d:d-q,3==b.start_at&&(g=q-g)),setTimeout(x,g*y+1)};b=k.extend(!0,{orientation:"vertical",num_of_stripes:12,direction:0,start_at:0,randomize:{orientation:!1,direction:!1,start_at:!1}},b);b.randomize.orientation&&(0==Math.floor(2*Math.random())?b.orientation="horizontal":b.orientation=
"vertical");b.randomize.direction&&(b.direction=Math.floor(3*Math.random()));b.randomize.start_at&&(b.start_at=Math.floor(4*Math.random()));q.find("> .item_container.new_item").removeClass("new_item");z.css({width:d.main_panel.dimensions.width,height:d.main_panel.dimensions.height}).appendTo(q);"horizontal"==b.orientation?(f=e=d.main_panel.dimensions.width,h=Math.ceil(d.main_panel.dimensions.height/b.num_of_stripes),m=h*b.num_of_stripes-d.main_panel.dimensions.height,m=0==m?h:h-m):(m=h=d.main_panel.dimensions.height,
e=Math.ceil(d.main_panel.dimensions.width/b.num_of_stripes),f=e*b.num_of_stripes-d.main_panel.dimensions.width,f=0==f?e:e-f);(function(a){var b=d.main_panel.dimensions.width,c=d.main_panel.dimensions.height;if(a.width!=b||a.height!=c)a.width<b?t=Math.floor((b-a.width)/2):a.width>b&&(t=-Math.floor((a.width-b)/2)),a.height<c?s=Math.floor((c-a.height)/2):a.height>c&&(s=-Math.floor((a.height-c)/2))})(d.preloaded_images[w]);for(var x=0;x<b.num_of_stripes;x++)B(void 0,x)}}},_video:{get_provider:function(a){if("<iframe"==
a.substring(0,7)){if(-1!==a.indexOf("youtube.com/embed/",7))return"youtube";if(-1!==a.indexOf("player.vimeo.com/video/",7))return"vimeo"}return""},get_video_id:function(a,b){var d,c;switch(a){case "youtube":case "vimeo":return d=k("<div>"+b+"</div>").find("iframe:first").attr("src"),c=d.indexOf("?"),-1!==c&&(d=d.substring(0,c)),"/"==d[d.length-1]&&(d=d.substring(0,d.length-1)),d.substring(d.lastIndexOf("/")+1);default:return""}},player_setup:function(a){var b=k("#"+a.container);b.css(a.dimensions);
a.container=b;switch(a.provider){case "youtube":e._video._youtube_player(a);break;case "vimeo":e._video._vimeo_player(a);break;case "flowplayer":e._video._flow_player(a)}},_youtube_player:function(a){var b=a.container.attr("id")+"_object",c,h=function(){new YT.Player(b,{events:{onStateChange:function(a){switch(a.data){case -1:n.trigger("slider_transition_finnished");break;case YT.PlayerState.PLAYING:N=!0;e.autoplay.reset();break;case YT.PlayerState.ENDED:setTimeout(e.next,1E3)}}}})};a.container.append('<iframe id="'+
b+'" type="text/html" width="'+a.dimensions.width+'" height="'+a.dimensions.height+'" src="http://www.youtube.com/embed/'+a.id+"?enablejsapi=1&amp;wmode=transparent&amp;origin="+location.protocol+"//"+location.host+'" frameborder="0"></iframe>');d.youtube_iframe_api.called||(d.youtube_iframe_api.called=!0,a=document.createElement("script"),a.src="//www.youtube.com/iframe_api",c=document.getElementsByTagName("script")[0],c.parentNode.insertBefore(a,c));d.youtube_iframe_api.loaded?h():window.onYouTubeIframeAPIReady=
function(){d.youtube_iframe_api.loaded=!0;h()}},_vimeo_player:function(a){var b=a.container.attr("id")+"_object",d="http://vimeo.com/moogaloop.swf?clip_id="+a.id+"&amp;server=vimeo.com&amp;show_title=1&amp;show_byline=1&amp;show_portrait=1&amp;fullscreen=1&amp;autoplay=0&amp;loop=0&amp;api=1&amp;player_id="+b,b='<object width="'+a.dimensions.width+'" height="'+a.dimensions.height+'"><param name="movie" value="'+d+'" /><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="wmode" value="transparent" /><param name="flashvars" value="api=1" /><embed id="'+
b+'" src="'+d+'" type="application/x-shockwave-flash" wmode="transparent" width="'+a.dimensions.width+'" height="'+a.dimensions.height+'" allowscriptaccess="always" allowfullscreen="true"></embed></object>';window.chameleon_video_vimeo_play=function(){N=!0;e.autoplay.reset()};window.chameleon_video_vimeo_end=function(){setTimeout(e.next,1E3)};window.vimeo_player_loaded=function(a){a=document.getElementById(a);n.trigger("slider_transition_finnished");a.api_addEventListener("play","chameleon_video_vimeo_play");
a.api_addEventListener("finish","chameleon_video_vimeo_end")};a.container.append(b)},_flow_player:function(a){var b=!1;a.container.html('<video src="'+a.id+'" />').flowplayer({swf:c.flowplayer_src}).bind("ready",function(){n.trigger("slider_transition_finnished")}).bind("resume",function(){c.autoplay.enable&&!b&&(N=b=!0,e.autoplay.reset())}).bind("finish",function(){c.autoplay.enable&&setTimeout(e.next,1E3)})}},key_browse:function(){k(document).keyup(function(a){37===a.keyCode&&e.prev();39===a.keyCode&&
e.next();return!1})},_scrollable_boxes:{init:function(a){var b,l=c.scrollable_boxes[a.box];b=d.scrollable_boxes[a.box]={jq:{container:k('<div class="scrollable_box'+(a.custom_class?" "+a.custom_class:"")+'" />').data("disabled",!1),viewport:k('<div class="viewport" />'),content:k('<div class="overview" />'),scrollbar:k()}};b.jq.container.append(b.jq.viewport);b.jq.viewport.append(b.jq.content);n.prepend(b.jq.container);e._scrollable_boxes.size(a.box);l.container.resize_to_content||b.jq.container.height(b.dimensions.height);
e._scrollable_boxes.display(a);l.container.show_on_hover&&n.hover(function(){d.mouse_entered=!0;!1==b.jq.container.data("disabled")&&b.jq.container.stop(!0).fadeTo(200,1,function(){b.jq.container.css("display","block")})},function(){d.mouse_entered=!1;!1==b.jq.container.data("disabled")&&b.jq.container.stop(!0).fadeTo(200,0,function(){b.jq.container.css("display","none")})})},size:function(a){var b=d.scrollable_boxes[a];a=c.scrollable_boxes[a];a.display&&(b.jq.scrollbar.remove(),b.jq.scrollbar=k('<div class="scrollbar"><div class="track"><div class="thumb"><div class="end"></div></div></div></div>'),
b.dimensions=e.get_dimensions(a.container.dimensions),e.position_element(b.jq.container,a.container.position),b.dimensions.height>d.container_dimensions.height&&(b.dimensions.height=d.container_dimensions.height),b.dimensions.width>d.container_dimensions.width&&(b.dimensions.width=d.container_dimensions.width),b.jq.container.width(b.dimensions.width).css({maxHeight:b.dimensions.height}).append(b.jq.scrollbar).eds_tinyscrollbar({size:b.dimensions.height-(b.jq.scrollbar.outerHeight(!0)-b.jq.scrollbar.height())}).hide(0),
b.jq.viewport.css({maxHeight:b.dimensions.height-b.jq.viewport.outerHeight(!0)}),a.container.resize_to_content||b.jq.container.height(b.dimensions.height))},display:function(a){var b=d.scrollable_boxes[a.box],e=c.scrollable_boxes[a.box],h=function(){var a=function(){b.jq.viewport.stop(!0).fadeTo(200,1,function(){b.jq.scrollbar.css("display","block")});b.jq.scrollbar.hasClass("disable")||b.jq.scrollbar.stop(!0).fadeTo(200,1,function(){b.jq.scrollbar.css("display","block")})};b.jq.viewport.css({visibility:"",
display:"none"});e.container.show_on_hover?d.mouse_entered?a():(b.jq.viewport.css({display:"block"}),b.jq.scrollbar.hasClass("disable")||b.jq.scrollbar.css({display:"block"})):a()};e.display&&("string"==typeof a.content&&a.content?(b.jq.container.data("disabled",!1),b.jq.container.is(":visible")?(b.jq.container.css({height:b.jq.container.height()}),b.jq.scrollbar.stop(!0).fadeTo(200,0,function(){b.jq.scrollbar.css("display","none")}),b.jq.viewport.stop(!0).fadeTo(200,0,function(){b.jq.content.html(a.content);
b.jq.viewport.css({visibility:"hidden",display:"block"}).removeClass("scrollable");b.jq.container.eds_tinyscrollbar_update();b.jq.scrollbar.hasClass("disable")||(b.jq.viewport.addClass("scrollable"),b.jq.container.eds_tinyscrollbar_update());!e.container.resize_to_content||e.container.show_on_hover&&!d.mouse_entered?(b.jq.container.height(b.jq.viewport.outerHeight(!0)),h()):b.jq.container.animate({height:b.jq.viewport.outerHeight(!0)},200,h)})):(b.jq.container.css({visibility:"hidden",display:"block"}),
b.jq.viewport.removeClass("scrollable"),b.jq.content.html(a.content),b.jq.container.eds_tinyscrollbar_update(),b.jq.scrollbar.hasClass("disable")?b.jq.scrollbar.css({display:"none"}):(b.jq.viewport.addClass("scrollable"),b.jq.scrollbar.css({display:"block",opacity:1}),b.jq.container.eds_tinyscrollbar_update()),b.jq.container.css({visibility:"",display:"none",height:e.container.resize_to_content?b.jq.viewport.outerHeight(!0):b.dimensions.height}),e.container.show_on_hover&&!d.mouse_entered||b.jq.container.stop(!0).fadeTo(200,
1,function(){b.jq.container.css("display","block")}))):b.jq.container.data("disabled",!0).stop(!0).fadeTo(200,0,function(){b.jq.container.css("display","none")}))}},item_info:{init:function(){e._scrollable_boxes.init({box:"item_info",custom_class:"item_info",content:g.items[p].info})},display:function(a){e._scrollable_boxes.display({box:"item_info",content:g.items[a].info})}},gallery_info:{init:function(){e._scrollable_boxes.init({box:"gallery_info",custom_class:"gallery_info",content:g.info})},display:function(){e._scrollable_boxes.display({box:"gallery_info",
content:g.info})}},autoplay_toggle:{init:function(){B=k('<a href="#" class="autoplay_toggle">Play/Pause</a>');c.autoplay.enable?B.addClass("pause"):J=!0;B.prependTo(n).click(function(){J?(J=!1,B.addClass("pause"),c.autoplay.enable||(aa=!0,c.autoplay.enable=!0,e.autoplay.init()),c.autoplay.pause_on_hover||e.autoplay.start()):(B.removeClass("pause"),J=!0,M||e.autoplay.pause());return!1});e.position_element(B,c.autoplay_toggle.position);c.autoplay_toggle.auto_hide&&(B.css("display","none"),n.hover(function(){B.stop().fadeTo(c.autoplay_toggle.hide_speed,
1)},function(){B.stop().fadeTo(c.autoplay_toggle.hide_speed,0)}))}},autoplay:{init:function(){c.autoplay.indicator.display&&(t=k('<div class="indicator" />'),D=k('<div class="autoplay_container" />'),e.autoplay.size(),"vertical"!=c.autoplay.indicator.orientation||c.autoplay.indicator.flip_direction?c.autoplay.indicator.flip_direction&&t.css({left:"auto",right:0}):t.css({top:"auto",bottom:0}),D.append(t).css("display","none"),aa?(n.append(D),D.fadeIn(300)):(n.prepend(D),D.css("display","")));n.bind("slider_transition_finnished",
function(){J||M||e.autoplay.start()})},size:function(){c.autoplay.enable&&c.autoplay.indicator.display&&(d.autoplay.indicator=e.get_dimensions(c.autoplay.indicator.dimensions),e.position_element(D,c.autoplay.indicator.position),"vertical"==c.autoplay.indicator.orientation?t.width(d.autoplay.indicator.width):t.height(d.autoplay.indicator.height),D.css(d.autoplay.indicator))},start:function(){var a=c.autoplay.interval,b=!0;c.autoplay.enable&&""==I&&(Y=(new Date).getTime(),U=!1,0!=L&&(b=!1,a=L),c.autoplay.indicator.display&&
(t.stop(),"vertical"==c.autoplay.indicator.orientation?(b&&t.height(0),t.animate({height:d.autoplay.indicator.height},a,"linear")):(b&&t.width(0),t.animate({width:d.autoplay.indicator.width},a,"linear"))),I=setTimeout(e.next,a))},pause:function(){c.autoplay.enable&&!U&&(Z=(new Date).getTime(),$=Z-Y,c.autoplay.indicator.display&&t.stop(),L=(0==L?c.autoplay.interval:L)-$,clearTimeout(I),I="")},reset:function(){c.autoplay.enable&&(clearTimeout(I),I="",L=0,U=!0,c.autoplay.indicator.display&&(t.stop(),
"vertical"==c.autoplay.indicator.orientation?t.height(0):t.width(0)))}},_items_panel:{init:function(a){a.page.append(a.item).appendTo(f[a.panel].container);d[a.panel].width=a.item.outerWidth(!0);d[a.panel].height=a.item.outerHeight(!0);d[a.panel].page.horizontal_space=a.page.outerWidth(!0)-a.page.width();d[a.panel].page.vertical_space=a.page.outerHeight(!0)-a.page.height();a.page.remove();c[a.panel].container.transparent||f[a.panel].wrapper.addClass("not_transparent")},calculate_pages:function(a){var b;
d[a.panel].container=e.get_dimensions(c[a.panel].container.dimensions);e.position_element(f[a.panel].wrapper,c[a.panel].container.position);d[a.panel].page.width=d[a.panel].width+d[a.panel].page.horizontal_space;d[a.panel].page.width>d[a.panel].container.width?d[a.panel].container.width=d[a.panel].page.width:d[a.panel].page.width=d[a.panel].container.width-d[a.panel].page.horizontal_space;d[a.panel].page.height=d[a.panel].height+d[a.panel].page.vertical_space;d[a.panel].page.height>d[a.panel].container.height?
d[a.panel].container.height=d[a.panel].page.height:d[a.panel].page.height=d[a.panel].container.height-d[a.panel].page.vertical_space;d[a.panel].per_row=Math.floor(d[a.panel].page.width/d[a.panel].width);d[a.panel].page.width=d[a.panel].per_row*d[a.panel].width;d[a.panel].row_count=Math.floor(d[a.panel].page.height/d[a.panel].height);d[a.panel].page.height=d[a.panel].row_count*d[a.panel].height;d[a.panel].per_page=d[a.panel].per_row*d[a.panel].row_count;d[a.panel].page.count=Math.ceil(a.item_count/
d[a.panel].per_page);1<d[a.panel].page.count?(f[a.panel].pagination?(f[a.panel].pagination.next.css("display","block"),f[a.panel].pagination.prev.css("display","block")):(f[a.panel].wrapper.append('<a href="#" class="navigation '+c[a.panel].pagination.direction+' prev">Previous</a><a href="#" class="navigation '+c[a.panel].pagination.direction+' next">Next</a>'),f[a.panel].pagination={prev:f[a.panel].wrapper.find("> a.navigation.prev"),next:f[a.panel].wrapper.find("> a.navigation.next")},f[a.panel].pagination.next.click(function(){var b=
f[a.panel].pages.filter(".current").index();e._items_panel.move_to_page(a.panel,b+1);return!1}),f[a.panel].pagination.prev.click(function(){var b=f[a.panel].pages.filter(".current").index();e._items_panel.move_to_page(a.panel,b-1);return!1})),"vertical"==c[a.panel].pagination.direction?(b=d[a.panel].height+d[a.panel].page.vertical_space+2*f[a.panel].pagination.prev.outerHeight(!0),b>d[a.panel].container.height&&(d[a.panel].container.height=b),f[a.panel].pagination.next.css({top:d[a.panel].container.height-
f[a.panel].pagination.next.height()}),d[a.panel].row_count=Math.floor((d[a.panel].container.height-2*f[a.panel].pagination.prev.outerHeight(!0)-d[a.panel].page.vertical_space)/d[a.panel].height),d[a.panel].page.height=d[a.panel].row_count*d[a.panel].height):(b=d[a.panel].width+d[a.panel].page.horizontal_space+2*f[a.panel].pagination.prev.outerWidth(!0),b>d[a.panel].container.width&&(d[a.panel].container.width=b),d[a.panel].per_row=Math.floor((d[a.panel].container.width-2*f[a.panel].pagination.prev.outerWidth(!0)-
d[a.panel].page.horizontal_space)/d[a.panel].width),d[a.panel].page.width=d[a.panel].per_row*d[a.panel].width),d[a.panel].per_page=d[a.panel].per_row*d[a.panel].row_count,d[a.panel].page.count=Math.ceil(a.item_count/d[a.panel].per_page)):f[a.panel].pagination&&(f[a.panel].pagination.next.css("display","none"),f[a.panel].pagination.prev.css("display","none"));f[a.panel].wrapper.css(d[a.panel].container);d[a.panel].window_width=d[a.panel].page.width+d[a.panel].page.horizontal_space;d[a.panel].window_height=
d[a.panel].page.height+d[a.panel].page.vertical_space;f[a.panel].window.width(d[a.panel].window_width).height(d[a.panel].window_height).css({top:Math.floor((d[a.panel].container.height-d[a.panel].window_height)/2)});"vertical"==c[a.panel].pagination.direction?f[a.panel].container.width(d[a.panel].window_width).height(0):f[a.panel].container.width(0).height(d[a.panel].window_height)},move_to_page:function(a,b){var e,h=f[a].pages.length-1;0>h||f[a].pages.eq(b).hasClass("current")||(b>h?(e="vertical"==
c[a].pagination.direction?{top:h*-(d[a].page.height+d[a].page.vertical_space)-10}:{left:h*-(d[a].page.width+d[a].page.horizontal_space)-10},f[a].container.animate(e,40,"swing",function(){e="vertical"==c[a].pagination.direction?{top:h*-(d[a].page.height+d[a].page.vertical_space)}:{left:h*-(d[a].page.width+d[a].page.horizontal_space)};f[a].container.animate(e,50,"swing")})):0>b?(e="vertical"==c[a].pagination.direction?{top:10}:{left:10},f[a].container.animate(e,40,"swing",function(){e="vertical"==c[a].pagination.direction?
{top:0}:{left:0};f[a].container.animate(e,50,"swing")})):(f[a].pages.removeClass("current").eq(b).addClass("current"),e="vertical"==c[a].pagination.direction?{top:b*-(d[a].page.height+d[a].page.vertical_space)}:{left:b*-(d[a].page.width+d[a].page.horizontal_space)},f[a].container.stop(!0,!1).animate(e,c[a].pagination.duration,c[a].pagination.easing)))}},thumbnails:{init:function(){f.thumbs={container:k('<div class="thumb_container" />'),window:k('<div class="thumb_window" />'),wrapper:k('<div class="thumb_wrapper" />')};
f.thumbs.window.append(f.thumbs.container);f.thumbs.wrapper.append(f.thumbs.window);n.prepend(f.thumbs.wrapper);e._items_panel.init({panel:"thumbs",page:k("<ul />"),item:k('<li><img src="'+w[0].items[0].thumb.src+'" alt="" style="width: '+c.thumbs.width+"px; height: "+c.thumbs.height+'px;" /></li>')});c.thumbs.auto_hide&&(f.thumbs.wrapper.css({display:"none"}),n.hover(function(){f.thumbs.wrapper.stop().fadeTo(c.thumbs.hide_speed,1)},function(){f.thumbs.wrapper.stop().fadeTo(c.thumbs.hide_speed,0)}));
e.thumbnails.display_category(!1);e.thumbnails.select(p)},display_category:function(){var a,b,l,h=0,m=0<arguments.length&&!1===arguments[0]?!1:!0;if(c.thumbs.display){e._items_panel.calculate_pages({panel:"thumbs",item_count:g.item_count});for(f.thumbs.container.html("");h<g.item_count;h++)0===h%d.thumbs.per_page&&("vertical"==c.thumbs.pagination.direction?f.thumbs.container.height(f.thumbs.container.height()+d.thumbs.window_height):f.thumbs.container.width(f.thumbs.container.width()+d.thumbs.window_width),
a=k("<ul />"),a.width(d.thumbs.page.width).height(d.thumbs.page.height).appendTo(f.thumbs.container)),b=c.thumbs.captions&&"string"==typeof g.items[h].thumb.caption&&g.items[h].thumb.caption?'<div class="caption_wrapper"><div class="caption">'+g.items[h].thumb.caption+"</div></div>":"",l=c.thumbs.display_item_types?'<span class="item_type_icon '+g.items[h].type+'"></span>':"",b='<li><img style="width: '+c.thumbs.width+"px; height: "+c.thumbs.height+'px;" src="'+g.items[h].thumb.src+'" alt="" />'+
l+b,m&&(k("<img />").load({index:h},function(a){f.thumbs.pages.find(".thumb_preloading").eq(a.data.index).fadeTo(500,0,function(){k(this).remove()})}).attr("src",g.items[h].thumb.src),b+='<div class="thumb_preloading"></div>'),a.append(b+"</li>"),c.thumbs.tooltips.enabled&&k.fn.qtip&&(l=!0,b="",g.items[h].thumb.tooltip&&(c.thumbs.tooltips.title&&g.items[h].thumb.tooltip.title&&(b='<p class="title">'+g.items[h].thumb.tooltip.title+"</p>",l=!1),c.thumbs.tooltips.description&&g.items[h].thumb.tooltip.description&&
(b+='<div class="description">'+g.items[h].thumb.tooltip.description+"</div>",l=!1),l||a.find("> li").filter(":last").qtip({content:{text:b},position:c.thumbs.tooltips.position,style:{classes:"chameleon_slider_tooltip "+c.thumbs.tooltips.classes,tip:{corner:!0}}})));f.thumbs.pages=f.thumbs.container.find("> ul")}},trigger:function(){f.thumbs.container.delegate("ul > li","click",function(){var a=k(this);e.show_item(a.parent().index()*d.thumbs.per_page+a.index());return!1})},select:function(a){c.thumbs.display&&
(a=f.thumbs.pages.find("> li").eq(a),e._items_panel.move_to_page("thumbs",a.parent().index()),f.thumbs.pages.find("> li.on").removeClass("on"),a.addClass("on"))}},categories:{init:function(){f.categories={container:k('<div class="categories_container" />'),window:k('<div class="categories_window" />'),wrapper:k('<div class="categories_wrapper '+c.categories.pagination.direction+'" />')};f.categories.window.append(f.categories.container);f.categories.wrapper.append(f.categories.window);n.prepend(f.categories.wrapper);
e._items_panel.init({panel:"categories",page:k("<ul />"),item:k('<li style="width: '+c.categories.width+"px; height: "+c.categories.height+'px;" />')});c.categories.auto_hide&&(f.categories.wrapper.css({display:"none"}),n.hover(function(){f.categories.wrapper.stop().fadeTo(c.categories.hide_speed,1)},function(){f.categories.wrapper.stop().fadeTo(c.categories.hide_speed,0)}));e.categories.display_categories()},display_categories:function(){var a,b,l=[],h,g=0,n=m[m.length-1],p,q;if(c.categories.display){if(d.categories.render_categories){1==
m.length?l=w:(b=k.extend([],m),b.pop(),l=e.get_category(b).children,l=[{id:-1,name:"&lt;Back",open_parent:!0}].concat(l),n++);h=l.length;e._items_panel.calculate_pages({panel:"categories",item_count:h});f.categories.container.empty();for(g=0;g<h;g++)0===g%d.categories.per_page&&("vertical"==c.categories.pagination.direction?f.categories.container.height(f.categories.container.height()+d.categories.window_height):f.categories.container.width(f.categories.container.width()+d.categories.window_width),
a=k("<ul />"),a.width(d.categories.page.width).height(d.categories.page.height).appendTo(f.categories.container)),p="undefined"!=typeof l[g].children&&0<l[g].children.length,b="<li"+(l[g].open_parent?' class="open_parent"':"")+(p?' class="has_children"':"")+' style="width: '+c.categories.width+"px; height: "+c.categories.height+'px;"><a href="#" class="'+(l[g].open_parent?"back_button":"category")+'"><span>'+l[g].name+"</span></a>",p&&(b+='<a href="#" class="open_children"></a>'),b+="</li>",a.append(b);
f.categories.pages=f.categories.container.find("> ul");b=f.categories.pages.find("> li > a.category");a=b.eq(0);q=c.categories.height-(a.outerHeight(!0)-a.height());b.height(q);b.each(function(){var a=k(this).find("span"),b=a.height();q>b?a.css({top:Math.floor((q-b)/2)}):a.css({top:0})})}else 1<m.length&&n++,d.categories.render_categories=!0;e.categories.select(n)}},trigger:function(){f.categories.container.delegate("li > a","click",function(){var a=k(this),b=a.parent(),c=b.parent().index()*d.categories.per_page+
b.index();f.categories.pages.find("> li").eq(0).hasClass("open_parent")&&c--;if(a.hasClass("category")){if(b.hasClass("on"))return!1;m.pop();m.push(c);r=e.category_ids_from_indexes(m);g=e.get_category(m);g.item_count=g.items.length;z=g.items[0].id;p=0;d.categories.render_categories=!1;e.change_category()}else a.hasClass("open_children")?(m.pop(),m.push(c),m.push(0),r=e.category_ids_from_indexes(m),g=e.get_category(m),g.item_count=g.items.length,z=g.items[0].id,p=0,e.change_category()):a.hasClass("back_button")&&
(m.pop(),r=e.category_ids_from_indexes(m),g=e.get_category(m),g.item_count=g.items.length,z=g.items[0].id,p=0,e.change_category());return!1})},select:function(a){a=f.categories.pages.find("> li").eq(a);e._items_panel.move_to_page("categories",a.parent().index());f.categories.pages.find("> li.on").removeClass("on");a.addClass("on")}},change_category:function(){e.main_panel.display_category();e.categories.display_categories();e.thumbnails.display_category();e.pagination.display_category();e.gallery_title.select();
e.gallery_info.display();e.show_item(p,!0)},arrows:{init:function(){E=k('<a href="#" class="navigation_button prev">Previous</a>');F=k('<a href="#" class="navigation_button next">Next</a>');n.prepend(E,F);e.position_element(E,c.arrows.prev.position);e.position_element(F,c.arrows.next.position)},trigger:function(){E.click(function(){e.prev();return!1});F.click(function(){e.next();return!1});c.arrows.auto_hide&&(E.fadeTo(0,0),F.fadeTo(0,0),n.hover(function(){E.stop().fadeTo(c.arrows.hide_speed,1);F.stop().fadeTo(c.arrows.hide_speed,
1)},function(){E.stop().fadeTo(c.arrows.hide_speed,0);F.stop().fadeTo(c.arrows.hide_speed,0)}))}},_title_box:{init:function(a){var b,f;d.title_boxes[a.box]=k('<span class="title_box'+(a.custom_class?" "+a.custom_class:"")+'" style="height: '+c.title_boxes[a.box].height+'px;"><span>T</span></span>');b=d.title_boxes[a.box].find("> span");d.title_boxes[a.box].css("visibility","hidden");n.prepend(d.title_boxes[a.box]);e.position_element(d.title_boxes[a.box],c.title_boxes[a.box].position);f=Math.floor((c.title_boxes[a.box].height-
b.height())/2);0>f&&(f=0);b.css({top:f}).empty();d.title_boxes[a.box].css("visibility","")},change_text:function(a){a.text?d.title_boxes[a.box].is(":visible")?d.title_boxes[a.box].stop().fadeTo(200,0,function(){d.title_boxes[a.box].fadeTo(400,1).find("> span").html(a.text)}):d.title_boxes[a.box].stop().fadeTo(400,1).find("> span").html(a.text):d.title_boxes[a.box].stop().fadeTo(200,0)}},item_title:{init:function(){e._title_box.init({box:"current_item",custom_class:"current_item"});e.item_title.select(p)},
select:function(a){c.title_boxes.current_item.display&&e._title_box.change_text({box:"current_item",text:g.items[a].title})},size:function(){c.title_boxes.current_item.display&&e.position_element(d.title_boxes.current_item,c.title_boxes.current_item.position)}},gallery_title:{init:function(){e._title_box.init({box:"current_gallery",custom_class:"current_gallery"});e.gallery_title.select()},select:function(){c.title_boxes.current_gallery.display&&e._title_box.change_text({box:"current_gallery",text:g.name})},
size:function(){c.title_boxes.current_gallery.display&&e.position_element(d.title_boxes.current_gallery,c.title_boxes.current_gallery.position)}},triggers:function(){c.arrows.display&&e.arrows.trigger();c.thumbs.display&&e.thumbnails.trigger();c.categories.display&&e.categories.trigger();c.key_browse&&e.key_browse();c.autoplay.enable&&e.autoplay.start();c.autoplay.pause_on_hover&&n.hover(function(){J||M||(M=!0,e.autoplay.pause())},function(){M=!1;N||(J||P)||e.autoplay.start()});n.bind("resize_slider",
function(a,b){e.autoplay.reset();d.container_dimensions={width:c.container_dimensions.w_as_ratio?Math.round(b.width*c.container_dimensions.width):b.width,height:c.container_dimensions.h_as_ratio?Math.round(b.height*c.container_dimensions.height):b.height};n.css(d.container_dimensions);e.main_panel.size();e.autoplay.size();e._scrollable_boxes.size("gallery_info");e._scrollable_boxes.size("item_info");e.gallery_title.size();e.item_title.size();e.thumbnails.display_category(!1);e.categories.display_categories();
c.pagination.display&&e.position_element(v,c.pagination.position);c.autoplay_toggle.display&&e.position_element(B,c.autoplay_toggle.position);c.arrows.display&&(e.position_element(E,c.arrows.prev.position),e.position_element(F,c.arrows.next.position));e.show_item(p,!0,"")});K.fadeOut(200,function(){K.remove()});n.trigger("slider_initialized")},get_dimensions:function(a){var b;b=1<arguments.length&&"object"==typeof arguments[1]?arguments[1]:{width:d.container_dimensions.width,height:d.container_dimensions.height};
return{width:a.w_as_ratio?Math.floor(b.width*a.width):a.width,height:a.h_as_ratio?Math.floor(b.height*a.height):a.height}},position_element:function(a,b){var c=b.v_as_ratio?Math.floor(b.v_offset*d.container_dimensions.height):b.v_offset,e=b.h_as_ratio?Math.floor(b.h_offset*d.container_dimensions.width):b.h_offset;b.v_center_point&&(c-=Math.floor(a.height()/2));b.h_center_point&&(e-=Math.floor(a.width()/2));"top"==b.vertical?a.css("top",c):a.css({top:"auto",bottom:c});"left"==b.horizontal?a.css("left",
e):a.css({left:"auto",right:e})},category_indexes_from_ids:function(a,b){var d=0,c,f=[];if(0==a.length)return[];for(c=k.isArray(b)?b.length:0;d<c;d++)if(b[d].id==a[0]){a.shift();if(0!=a.length&&(f=e.category_indexes_from_ids(a,b[d].children),0==f.length))break;return[d].concat(f)}return[]},category_ids_from_indexes:function(a){var b=a.length,d=1,c,e=w[a[0]];for(c=[e.id];d<b;d++)e=e.children[a[d]],c.push(e.id);return c},get_category:function(a){var b=a.length,d=1,c;if(!k.isArray(a)||0==a.length)return w[0];
for(c=w[a[0]];d<b;d++)c=c.children[a[d]];return c},item_index_from_id:function(a){var b=g.items,d=b.length,c=0;if(void 0==a)return 0;for(;c<d;c++)if(b[c].id==a)return c;return 0},set_url_param:function(a,b){var d="",c="",e=b+(2<arguments.length?"="+arguments[2]:""),f,g=!1,k=!1,m;a=a.split("#");d=1==a.length?!1:a[1];a=a[0].split("?");if(1==a.length||""==a[1])c=a[0]+"?"+e;else{c=a[0]+"?";f=a[1].split("&");for(m in f)"string"==typeof f[m]&&(g=f[m].split("="),g[0]==b?(k=!0,c+=e+"&"):c=1==g.length?c+(g[0]+
"&"):c+(g[0]+"="+g[1]+"&"));c=k?c.substring(0,c.length-1):c+e}return c+(!1===d?"":"#"+d)}};e.init()})};k.fn.chameleonSliderFullscreen=function(y){var c,r;close_fullscreen=function(){c.fadeTo(500,0,function(){r.trigger("destroy");c.remove()});k(document).unbind("keydown.chameleonslider_fullscreen")};c=k('<div id="chameleonSliderFullscreen_'+y.module_id+'" style="z-index: 15000; overflow: hidden; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, .5);"><div class="chameleon_slider '+
y.theme+'" /></div>');k("body").append(c);r=c.find("> .chameleon_slider");k.extend(!0,y,{container_dimensions:{width:1,height:1,w_as_ratio:!0,h_as_ratio:!0},autoplay:{pause_on_hover:!1},buttons:{exit_fullscreen:{display:!0},fullscreen:{display:!1}},main_panel:{stretch_small_image:!0}});r.bind("slider_initialized",function(){r.find("> .exit_fullscreen").click(function(){close_fullscreen();return!1});k(document).bind("keydown.chameleonslider_fullscreen",function(c){27==c.which&&close_fullscreen()})});
r.chameleonSlider_1_5_1(y)}})(eds1_8);