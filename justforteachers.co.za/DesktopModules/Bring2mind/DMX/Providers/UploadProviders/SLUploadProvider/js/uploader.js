if(typeof(UploaderControl)=="undefined"||UploaderControl==null){UploaderControls={};UploaderControl=function(a){if(arguments.length>0){this.init(a)}};UploaderControl.getInstance=function(a){var b=UploaderControls[a];if(b==null){b=UploaderControls[a]=new UploaderControl(a)}return b};UploaderControl.eventObjects={};UploaderControl.prototype={id:null,silverlightClientId:null,loaded:false,uploadInProgress:false,userContext:null,init:function(a){this.id=a;this.events={};UploaderControl.eventObjects[this.id]=this;this.events.onuploadstarted=null;this.events.onfileuploaded=null;this.events.onallfilesuploaded=null;this.events.onerror=null},initialize:function(c){this.userContext=c;this.silverlightClientId="silverlight"+this.id;if(!this.loaded){try{var b=document.getElementById(this.silverlightClientId);if(b&&b.Content&&b.Content.Files){this.onLoad()}}catch(a){}}},setUserContext:function(a){this.userContext=a},attachEvent:function(b,c,a){if(a==null){a=this}if(c==null){this.events[b]=null}else{this.events[b]={func:c,context:a}}},clearFileList:function(){if(this.loaded){var b=document.getElementById(this.silverlightClientId);try{if(b&&b.Content&&b.Content.UploaderControl){b.Content.UploaderControl.ClearFileList()}}catch(a){}}},getFileCount:function(){var c=-1;if(this.loaded){var b=document.getElementById(this.silverlightClientId);try{if(b&&b.Content&&b.Content.Files){c=b.Content.Files.TotalFilesSelected}}catch(a){}}return c},onLoad:function(){this.loaded=true;var a=document.getElementById(this.silverlightClientId);a.Content.UploaderControl.UploadStarted=window["UploaderControl_uploadStarted_"+this.id];a.Content.Files.SingleFileUploadFinished=window["UploaderControl_singleFileUploadFinished_"+this.id];a.Content.Files.AllFilesFinished=window["UploaderControl_allFilesFinished_"+this.id];a.Content.Files.ErrorOccurred=window["UploaderControl_errorOccurred_"+this.id]},uploadStarted:function(c,a){this.invokeEventHandler("onuploadstarted");this.uploadInProgress=true;var b=document.getElementById(this.silverlightClientId);b.Content.Files.UserContextParameter=this.userContext},singleFileUploadFinished:function(b,a){this.invokeEventHandler("onfileuploaded",a.FileGuid,a.FileName,a.FileSize)},allFilesFinished:function(b,a){this.uploadInProgress=false;this.invokeEventHandler("onallfilesuploaded")},errorOccurred:function(b,a){this.invokeEventHandler("onerror",a.ErrorMessage)},getEventHandler:function(a){return this.events[a]},invokeEventHandler:function(b){if((handler=this.events[b])!=null){var a=new Array();for(var c=1;c<arguments.length;c++){a.push(arguments[c])}return handler.func.apply(handler.context,a)}return null}}}$(document).ready(function(){try{var b=UploaderControl.getInstance(uploadId);b.attachEvent("onuploadstarted",uploader_onuploadstarted);b.attachEvent("onfileuploaded",uploader_onfileuploaded);b.attachEvent("onallfilesuploaded",uploader_onallfilesuploaded)}catch(a){}});function uploader_onuploadstarted(a,b,c){if(document.getElementById(nextButtonId)){document.getElementById(nextButtonId).disabled=true}}function uploader_onfileuploaded(a,b,c){uploadedFiles.value+="|"+a+","+b}function uploader_onallfilesuploaded(){if(document.getElementById(nextButtonId)){document.getElementById(nextButtonId).disabled=false}};